Return-Path: <linux-usb-owner@vger.kernel.org>
X-Original-To: lists+linux-usb@lfdr.de
Delivered-To: lists+linux-usb@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id E38B2150224
	for <lists+linux-usb@lfdr.de>; Mon,  3 Feb 2020 08:57:49 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727644AbgBCH5m (ORCPT <rfc822;lists+linux-usb@lfdr.de>);
        Mon, 3 Feb 2020 02:57:42 -0500
Received: from mx2.suse.de ([195.135.220.15]:34450 "EHLO mx2.suse.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1727339AbgBCH5m (ORCPT <rfc822;linux-usb@vger.kernel.org>);
        Mon, 3 Feb 2020 02:57:42 -0500
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
        by mx2.suse.de (Postfix) with ESMTP id 67A84AF86;
        Mon,  3 Feb 2020 07:57:41 +0000 (UTC)
Date:   Mon, 03 Feb 2020 08:57:41 +0100
Message-ID: <s5ha76085my.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     edes <edes@gmx.net>
Cc:     linux-usb@vger.kernel.org, linux-kernel@vger.kernel.org,
        Johan Hovold <johan@kernel.org>, Takashi Iwai <tiwai@suse.de>
Subject: Re: kernel 5.4.11: problems with usb sound cards
In-Reply-To: <20200202202816.5a1d8af1@acme7.acmenet>
References: <20200201105829.5682c887@acme7.acmenet>
        <20200201141009.GK10381@localhost>
        <20200201132616.09857152@acme7.acmenet>
        <20200202101933.GL10381@localhost>
        <20200202134159.GM10381@localhost>
        <20200202202816.5a1d8af1@acme7.acmenet>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Sender: linux-usb-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-usb.vger.kernel.org>
X-Mailing-List: linux-usb@vger.kernel.org

On Mon, 03 Feb 2020 00:28:16 +0100,
edes wrote:
> 
> 
> el 2020-02-02 a las 14:41 Johan Hovold escribiÃ³:
> 
> > I realised I forgot the test to match on the device descriptor when
> > applying the blacklist. It doesn't matter currently since I only enable
> > the quirk for your device, but if you haven't tested the patch already,
> > would you mind testing the below patch instead?
> 
> Hi, Johan, thank you for looking into this. I tested your patch, and it
> works! (5.4.11 and 5.5.0).
> 
> I haven't performed extensive tests, but the card is again recognized as
> both playback and capture device. Thank you!
> 
> Is this and acceptable solution and will this patch be integrated into the
> kernel?

I don't mind where to blacklist; we may add a similar quirk in
USB-audio driver side, too.


thanks,

Takashi

> 
> OTOH, you said:
> 
> > Ok, so the device has a broken altsetting 3 for interface 1, where
> > endpoint 0x85 is declared as an isochronous endpoint, despite being used
> > by interface 2 as an audio endpoint:
> [...]
> > Note that the broken altsetting probably should be using endpoint 0x81
> > just like the other altsettings for that interface, 
> 
> I can't say I understand exactly what you're saying, but do you think it
> could be worth contacting the company and see if they are willing to fix
> this with a new firmware?
> 
> Anyway, it's working now, thank you again.
> 
> 
> 
> --
> 
