Return-Path: <linux-usb-owner@vger.kernel.org>
X-Original-To: lists+linux-usb@lfdr.de
Delivered-To: lists+linux-usb@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 1E6BE1503A6
	for <lists+linux-usb@lfdr.de>; Mon,  3 Feb 2020 10:54:26 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727072AbgBCJyT (ORCPT <rfc822;lists+linux-usb@lfdr.de>);
        Mon, 3 Feb 2020 04:54:19 -0500
Received: from mx2.suse.de ([195.135.220.15]:38316 "EHLO mx2.suse.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1726287AbgBCJyS (ORCPT <rfc822;linux-usb@vger.kernel.org>);
        Mon, 3 Feb 2020 04:54:18 -0500
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
        by mx2.suse.de (Postfix) with ESMTP id 166CCAC37;
        Mon,  3 Feb 2020 09:54:17 +0000 (UTC)
Date:   Mon, 03 Feb 2020 10:54:16 +0100
Message-ID: <s5hmua0ro6v.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Johan Hovold <johan@kernel.org>
Cc:     edes <edes@gmx.net>, linux-usb@vger.kernel.org,
        linux-kernel@vger.kernel.org
Subject: Re: kernel 5.4.11: problems with usb sound cards
In-Reply-To: <20200203082908.GR10381@localhost>
References: <20200201105829.5682c887@acme7.acmenet>
        <20200201141009.GK10381@localhost>
        <20200201132616.09857152@acme7.acmenet>
        <20200202101933.GL10381@localhost>
        <20200202134159.GM10381@localhost>
        <20200202202816.5a1d8af1@acme7.acmenet>
        <s5ha76085my.wl-tiwai@suse.de>
        <20200203082908.GR10381@localhost>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Sender: linux-usb-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-usb.vger.kernel.org>
X-Mailing-List: linux-usb@vger.kernel.org

On Mon, 03 Feb 2020 09:29:08 +0100,
Johan Hovold wrote:
> 
> On Mon, Feb 03, 2020 at 08:57:41AM +0100, Takashi Iwai wrote:
> > On Mon, 03 Feb 2020 00:28:16 +0100,
> > edes wrote:
> > > 
> > > 
> > > el 2020-02-02 a las 14:41 Johan Hovold escribiÃ³:
> > > 
> > > > I realised I forgot the test to match on the device descriptor when
> > > > applying the blacklist. It doesn't matter currently since I only enable
> > > > the quirk for your device, but if you haven't tested the patch already,
> > > > would you mind testing the below patch instead?
> > > 
> > > Hi, Johan, thank you for looking into this. I tested your patch, and it
> > > works! (5.4.11 and 5.5.0).
> > > 
> > > I haven't performed extensive tests, but the card is again recognized as
> > > both playback and capture device. Thank you!
> > > 
> > > Is this and acceptable solution and will this patch be integrated into the
> > > kernel?
> > 
> > I don't mind where to blacklist; we may add a similar quirk in
> > USB-audio driver side, too.
> 
> I'm afraid it needs to be done in core since this info is needed while
> parsing the descriptors.

OK, then let's go with your patch if there is no objection.


thanks,

Takashi
