Return-Path: <linux-usb+bounces-27390-lists+linux-usb=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-usb@lfdr.de
Delivered-To: lists+linux-usb@lfdr.de
Received: from ny.mirrors.kernel.org (ny.mirrors.kernel.org [147.75.199.223])
	by mail.lfdr.de (Postfix) with ESMTPS id 849DCB3C9F4
	for <lists+linux-usb@lfdr.de>; Sat, 30 Aug 2025 12:07:03 +0200 (CEST)
Received: from smtp.subspace.kernel.org (relay.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-ECDSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by ny.mirrors.kernel.org (Postfix) with ESMTPS id 4224D582B02
	for <lists+linux-usb@lfdr.de>; Sat, 30 Aug 2025 10:07:03 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id BB725263C75;
	Sat, 30 Aug 2025 10:06:56 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=163.com header.i=@163.com header.b="nQmGtciu"
X-Original-To: linux-usb@vger.kernel.org
Received: from m16.mail.163.com (m16.mail.163.com [220.197.31.2])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 1F2337262B;
	Sat, 30 Aug 2025 10:06:52 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=220.197.31.2
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1756548416; cv=none; b=vBQ5ugiIqYiNQuven582wDtr3K9Oi36ADECbJH/3D+zUqWQf9f8MBhAAYE0LnIX1JGbyaMlJSNerThSvFICRAoO2oKVTPjUKvK2dq4sOixu7R06leihmGBT9xYcMYJ3y/kWn+7o4Ze8xbIFyRgASxT60gLqhBUMg/5NjkjtrU2c=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1756548416; c=relaxed/simple;
	bh=wq6sPf++8fQX1W8xsz2ZV0XLtM+pG8imSne7OwZQMQI=;
	h=Date:From:To:Cc:Subject:In-Reply-To:References:Content-Type:
	 MIME-Version:Message-ID; b=pVPaweCJ0vwu3o4vOcMzW1ZwTyqGwm3lEbbad5q5C/+BVM0E8iQTnQDZZ3tVnCzUTKK15UnfFg7sSLF+SZEKd1zcsk4881KqEThfJhaloJljx+XZglgDQh+usn44xPImrsPtCiZA86taNs+7nRN0abSavLXvGHWK2MdsyW4N/7Y=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=163.com; spf=pass smtp.mailfrom=163.com; dkim=fail (1024-bit key) header.d=163.com header.i=@163.com header.b=nQmGtciu reason="signature verification failed"; arc=none smtp.client-ip=220.197.31.2
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=163.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=163.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
	s=s110527; h=Date:From:To:Subject:Content-Type:MIME-Version:
	Message-ID; bh=gRzC1+q4sB/DFmr8FP4KkTBSoxP41b+AouK6rccVA9U=; b=n
	QmGtciuCL/gyWn2ujHdiFfEC1AWTHgKK332Rr4H4z9SnMuXNlxFEElwFx++hzGDe
	tHWrPlpU4gmvmUE76UEaoDCfMZuralRqPI8WCOemGUCF6svCMOfa+D03YfrPlGjn
	vNasChhbYGX00My7DaHCY/nid/Oly/GTIAVWofcv/E=
Received: from 00107082$163.com ( [111.35.190.191] ) by
 ajax-webmail-wmsvr-40-139 (Coremail) ; Sat, 30 Aug 2025 18:06:03 +0800
 (CST)
Date: Sat, 30 Aug 2025 18:06:03 +0800 (CST)
From: "David Wang" <00107082@163.com>
To: =?UTF-8?Q?Micha=C5=82_Pecio?= <michal.pecio@gmail.com>
Cc: WeitaoWang-oc@zhaoxin.com, mathias.nyman@linux.intel.com,
	gregkh@linuxfoundation.org, linux-usb@vger.kernel.org,
	regressions@lists.linux.dev, linux-kernel@vger.kernel.org,
	surenb@google.com, kent.overstreet@linux.dev
Subject: Re: [REGRESSION 6.17-rc3] usb/xhci: possible memory leak after
 suspend/resume cycle.
X-Priority: 3
X-Mailer: Coremail Webmail Server Version 2023.4-cmXT build
 20250723(a044bf12) Copyright (c) 2002-2025 www.mailtech.cn 163com
In-Reply-To: <20250830114828.3dd8ed56.michal.pecio@gmail.com>
References: <20250829181354.4450-1-00107082@163.com>
 <20250830114828.3dd8ed56.michal.pecio@gmail.com>
X-NTES-SC: AL_Qu2eBPmft0st5SWYZekZnEYQheY4XMKyuPkg1YJXOp80iSXK+joRR0V7JmbW0fCNMwGHgBOJWjdJxu9IYrF/XZOlKghOCNEQEKiz3kOzUED6
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset=UTF-8
Precedence: bulk
X-Mailing-List: linux-usb@vger.kernel.org
List-Id: <linux-usb.vger.kernel.org>
List-Subscribe: <mailto:linux-usb+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-usb+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Message-ID: <1e8f53d5.2c21.198fa70f4f7.Coremail.00107082@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID:iygvCgD3f4MMzbJoi8skAA--.816W
X-CM-SenderInfo: qqqrilqqysqiywtou0bp/1tbiMxG5qmiyvgHQnQACsb
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==

CgpBdCAyMDI1LTA4LTMwIDE3OjQ4OjI4LCAiTWljaGHFgiBQZWNpbyIgPG1pY2hhbC5wZWNpb0Bn
bWFpbC5jb20+IHdyb3RlOgo+T24gU2F0LCAzMCBBdWcgMjAyNSAwMjoxMzo1NCArMDgwMCwgRGF2
aWQgV2FuZyB3cm90ZToKPj4gSGksCj4+Cj4+IEkgaGF2ZSBiZWVuIHdhdGNoaW5nIGtlcm5lbCBt
ZW1vcnkgdXNhZ2UgZm9yIGRyaXZlcnMgZm9yIGEgd2hpbGUsIHZpYSAvcHJvYy9hbGxvY2luZm8u
Cj4+IEFmdGVyIHVwZ3JhZGUgdG8gNi4xNy1yYzMsIEkgbm90aWNlIG1lbW9yeSB1c2FnZSBiZWhh
dmlvciBjaGFuZ2VzIGZvciB1c2IgZHJpdmVyczoKPj4gCj4+IEJlZm9yZSByYzMsIGFmdGVyIHNl
dmVyYWwgc3VzcGVuZC9yZXN1bWUgY3ljbGVzLCB1c2IgZGV2aWNlcydzIG1lbW9yeSB1c2FnZSBp
cyB2ZXJ5IHN0YWJsZToKPj4gCj4+ICAgICAgICA0MDk2MCAgICAgICAgNSBkcml2ZXJzL3VzYi9o
b3N0L3hoY2ktbWVtLmM6OTgwIFt4aGNpX2hjZF0gZnVuYzp4aGNpX2FsbG9jX3ZpcnRfZGV2aWNl
IDkKPj4gICAgICAgICAxMDI0ICAgICAgICAxIGRyaXZlcnMvdXNiL2hvc3QveGhjaS1tZW0uYzo4
NDEgW3hoY2lfaGNkXSBmdW5jOnhoY2lfYWxsb2NfdHRfaW5mbyAyCj4+ICAgICAgICAgIDMyMCAg
ICAgICAxMCBkcml2ZXJzL3VzYi9ob3N0L3hoY2ktbWVtLmM6NDYxIFt4aGNpX2hjZF0gZnVuYzp4
aGNpX2FsbG9jX2NvbnRhaW5lcl9jdHggMzEKPj4gICAgICAgICAxOTIwICAgICAgIDE1IGRyaXZl
cnMvdXNiL2hvc3QveGhjaS1tZW0uYzozNzcgW3hoY2lfaGNkXSBmdW5jOnhoY2lfcmluZ19hbGxv
YyAzMQo+PiAgICAgICAgICAxMTIgICAgICAgMTIgZHJpdmVycy91c2IvaG9zdC94aGNpLW1lbS5j
OjQ5IFt4aGNpX2hjZF0gZnVuYzp4aGNpX3NlZ21lbnRfYWxsb2MgMzIKPj4gICAgICAgICAxNzky
ICAgICAgIDI4IGRyaXZlcnMvdXNiL2hvc3QveGhjaS1tZW0uYzozOCBbeGhjaV9oY2RdIGZ1bmM6
eGhjaV9zZWdtZW50X2FsbG9jIDU5Cj4+IAo+PiBCdXQgd2l0aCByYzMsIHRoZSBtZW1vcnkgdXNh
Z2UgaW5jcmVhc2UgYWZ0ZXIgZWFjaCBzdXNwZW5kL3Jlc3VtZSBjeWNsZTogCj4+IAo+PiAjMToK
Pj4gICAgICAgIDQ5MTUyICAgICAgICA2IGRyaXZlcnMvdXNiL2hvc3QveGhjaS1tZW0uYzo5ODAg
W3hoY2lfaGNkXSBmdW5jOnhoY2lfYWxsb2NfdmlydF9kZXZpY2UgOQo+PiAgICAgICAgIDEwMjQg
ICAgICAgIDEgZHJpdmVycy91c2IvaG9zdC94aGNpLW1lbS5jOjg0MSBbeGhjaV9oY2RdIGZ1bmM6
eGhjaV9hbGxvY190dF9pbmZvIDIKPj4gICAgICAgICAgMzg0ICAgICAgIDEyIGRyaXZlcnMvdXNi
L2hvc3QveGhjaS1tZW0uYzo0NjEgW3hoY2lfaGNkXSBmdW5jOnhoY2lfYWxsb2NfY29udGFpbmVy
X2N0eCAzMgo+PiAgICAgICAgIDIxNzYgICAgICAgMTcgZHJpdmVycy91c2IvaG9zdC94aGNpLW1l
bS5jOjM3NyBbeGhjaV9oY2RdIGZ1bmM6eGhjaV9yaW5nX2FsbG9jIDMyCj4+ICAgICAgICAgIDEy
OCAgICAgICAxNCBkcml2ZXJzL3VzYi9ob3N0L3hoY2ktbWVtLmM6NDkgW3hoY2lfaGNkXSBmdW5j
OnhoY2lfc2VnbWVudF9hbGxvYyAzNAo+PiAgICAgICAgIDIwNDggICAgICAgMzIgZHJpdmVycy91
c2IvaG9zdC94aGNpLW1lbS5jOjM4IFt4aGNpX2hjZF0gZnVuYzp4aGNpX3NlZ21lbnRfYWxsb2Mg
NjEKPj4gIzI6Cj4+ICAgICAgICA1NzM0NCAgICAgICAgNyBkcml2ZXJzL3VzYi9ob3N0L3hoY2kt
bWVtLmM6OTgwIFt4aGNpX2hjZF0gZnVuYzp4aGNpX2FsbG9jX3ZpcnRfZGV2aWNlIDEzCj4+ICAg
ICAgICAgMTAyNCAgICAgICAgMSBkcml2ZXJzL3VzYi9ob3N0L3hoY2ktbWVtLmM6ODQxIFt4aGNp
X2hjZF0gZnVuYzp4aGNpX2FsbG9jX3R0X2luZm8gMwo+PiAgICAgICAgICA0NDggICAgICAgMTQg
ZHJpdmVycy91c2IvaG9zdC94aGNpLW1lbS5jOjQ2MSBbeGhjaV9oY2RdIGZ1bmM6eGhjaV9hbGxv
Y19jb250YWluZXJfY3R4IDQ2Cj4+ICAgICAgICAgMjQzMiAgICAgICAxOSBkcml2ZXJzL3VzYi9o
b3N0L3hoY2ktbWVtLmM6Mzc3IFt4aGNpX2hjZF0gZnVuYzp4aGNpX3JpbmdfYWxsb2MgNDMKPj4g
ICAgICAgICAgMTQ0ICAgICAgIDE2IGRyaXZlcnMvdXNiL2hvc3QveGhjaS1tZW0uYzo0OSBbeGhj
aV9oY2RdIGZ1bmM6eGhjaV9zZWdtZW50X2FsbG9jIDQ0Cj4+ICAgICAgICAgMjMwNCAgICAgICAz
NiBkcml2ZXJzL3VzYi9ob3N0L3hoY2ktbWVtLmM6MzggW3hoY2lfaGNkXSBmdW5jOnhoY2lfc2Vn
bWVudF9hbGxvYyA4Mgo+PiAjMzoKPj4gICAgICAgIDY1NTM2ICAgICAgICA4IGRyaXZlcnMvdXNi
L2hvc3QveGhjaS1tZW0uYzo5ODAgW3hoY2lfaGNkXSBmdW5jOnhoY2lfYWxsb2NfdmlydF9kZXZp
Y2UgMTcKPj4gICAgICAgICAxMDI0ICAgICAgICAxIGRyaXZlcnMvdXNiL2hvc3QveGhjaS1tZW0u
Yzo4NDEgW3hoY2lfaGNkXSBmdW5jOnhoY2lfYWxsb2NfdHRfaW5mbyA0Cj4+ICAgICAgICAgIDUx
MiAgICAgICAxNiBkcml2ZXJzL3VzYi9ob3N0L3hoY2ktbWVtLmM6NDYxIFt4aGNpX2hjZF0gZnVu
Yzp4aGNpX2FsbG9jX2NvbnRhaW5lcl9jdHggNjAKPj4gICAgICAgICAyNjg4ICAgICAgIDIxIGRy
aXZlcnMvdXNiL2hvc3QveGhjaS1tZW0uYzozNzcgW3hoY2lfaGNkXSBmdW5jOnhoY2lfcmluZ19h
bGxvYyA1NAo+PiAgICAgICAgICAxNjAgICAgICAgMTggZHJpdmVycy91c2IvaG9zdC94aGNpLW1l
bS5jOjQ5IFt4aGNpX2hjZF0gZnVuYzp4aGNpX3NlZ21lbnRfYWxsb2MgNTQKPj4gICAgICAgICAy
NTYwICAgICAgIDQwIGRyaXZlcnMvdXNiL2hvc3QveGhjaS1tZW0uYzozOCBbeGhjaV9oY2RdIGZ1
bmM6eGhjaV9zZWdtZW50X2FsbG9jIDEwMwo+PiAKPj4gVGhlIG1lbW9yeSBpbmNyZWFzaW5nIHBh
dHRlcm4ga2VlcHMgZ29pbmcgb24gZm9yIGVhY2ggc3VzcGVuZC9yZXN1bWUgYWZ0ZXJ3YXJkcywg
SSBhbSBub3QKPj4gc3VyZSB3aGV0aGVyIHRob3NlIG1lbW9yeSB3b3VsZCBiZSByZWxlYXNlZCBz
b21ldGltZSBsYXRlci4KPj4gCj4+IEFuZCBpbiBrZXJuZWwgbG9nLCB0d28gbGluZXMgb2YgZXJy
b3IgYWx3YXlzIHNob3dlZCB1cCBhZnRlciBzdXNwZW5kL3Jlc3VtZToKPj4gCj4+IAlbICAyOTUu
NjEzNTk4XSB4aGNpX2hjZCAwMDAwOjAzOjAwLjA6IGRtYV9wb29sX2Rlc3Ryb3kgeEhDSSByaW5n
IHNlZ21lbnRzIGJ1c3kKPj4gCVsgIDI5NS42MTM2MDVdIHhoY2lfaGNkIDAwMDA6MDM6MDAuMDog
ZG1hX3Bvb2xfZGVzdHJveSB4SENJIGlucHV0L291dHB1dCBjb250ZXh0cyBidXN5Cj4KPkhpLAo+
Cj5Hb29kIHdvcmssIGxvb2tzIGxpa2Ugc3VzcGVuZC9yZXN1bWUgaXMgYSBsaXR0bGUgdW5kZXJz
dGVzdGVkIGNvcm5lcgo+b2YgdGhpcyBkcml2ZXIuCj4KPkRpZCB5b3UgY2hlY2sgd2hldGhlciB0
aGUgc2FtZSBsZWFrIG9jY3VycyBpZiB5b3Ugc2ltcGx5IGRpc2Nvbm5lY3QKPmEgZGV2aWNlIG9y
IGlmIGl0J3MgdHJ1bHkgdW5pcXVlIHRvIHN1c3BlbmQ/Cj4KPj4gQW5kIGJpc2VjdCBuYXJyb3cg
ZG93biB0byBjb21taXQgMmViMDMzNzYxNTFiYjg1ODVjYWEyM2VkMjY3MzU4MzEwN2JiNTE5MygK
Pj4gInVzYjogeGhjaTogRml4IHNsb3RfaWQgcmVzb3VyY2UgcmFjZSBjb25mbGljdCIpOgo+Cj5J
IHNlZSBhIHRyaXZpYWwgYnVnIHdoaWNoIGV2ZXJ5b25lIChteXNlbGYgaW5jbHVkZWQgdGJoKSBt
aXNzZWQgYmVmb3JlLgo+RG9lcyB0aGlzIGhlbHA/Cj4KPmRpZmYgLS1naXQgYS9kcml2ZXJzL3Vz
Yi9ob3N0L3hoY2ktbWVtLmMgYi9kcml2ZXJzL3VzYi9ob3N0L3hoY2ktbWVtLmMKPmluZGV4IGYx
MWUxM2Y5Y2RiNC4uZjI5NDAzMmMyYWQ3IDEwMDY0NAo+LS0tIGEvZHJpdmVycy91c2IvaG9zdC94
aGNpLW1lbS5jCj4rKysgYi9kcml2ZXJzL3VzYi9ob3N0L3hoY2ktbWVtLmMKPkBAIC05MzIsNyAr
OTMyLDcgQEAgdm9pZCB4aGNpX2ZyZWVfdmlydF9kZXZpY2Uoc3RydWN0IHhoY2lfaGNkICp4aGNp
LCBzdHJ1Y3QgeGhjaV92aXJ0X2RldmljZSAqZGV2LAo+ICAqLwo+IHN0YXRpYyB2b2lkIHhoY2lf
ZnJlZV92aXJ0X2RldmljZXNfZGVwdGhfZmlyc3Qoc3RydWN0IHhoY2lfaGNkICp4aGNpLCBpbnQg
c2xvdF9pZCkKPiB7Cj4tCXN0cnVjdCB4aGNpX3ZpcnRfZGV2aWNlICp2ZGV2Owo+KwlzdHJ1Y3Qg
eGhjaV92aXJ0X2RldmljZSAqdmRldiwgKnRtcF92ZGV2Owo+IAlzdHJ1Y3QgbGlzdF9oZWFkICp0
dF9saXN0X2hlYWQ7Cj4gCXN0cnVjdCB4aGNpX3R0X2J3X2luZm8gKnR0X2luZm8sICpuZXh0Owo+
IAlpbnQgaTsKPkBAIC05NTIsOCArOTUyLDggQEAgc3RhdGljIHZvaWQgeGhjaV9mcmVlX3ZpcnRf
ZGV2aWNlc19kZXB0aF9maXJzdChzdHJ1Y3QgeGhjaV9oY2QgKnhoY2ksIGludCBzbG90X2kKPiAJ
CWlmICh0dF9pbmZvLT5zbG90X2lkID09IHNsb3RfaWQpIHsKPiAJCQkvKiBhcmUgYW55IGRldmlj
ZXMgdXNpbmcgdGhpcyB0dF9pbmZvPyAqLwo+IAkJCWZvciAoaSA9IDE7IGkgPCBIQ1NfTUFYX1NM
T1RTKHhoY2ktPmhjc19wYXJhbXMxKTsgaSsrKSB7Cj4tCQkJCXZkZXYgPSB4aGNpLT5kZXZzW2ld
Owo+LQkJCQlpZiAodmRldiAmJiAodmRldi0+dHRfaW5mbyA9PSB0dF9pbmZvKSkKPisJCQkJdG1w
X3ZkZXYgPSB4aGNpLT5kZXZzW2ldOwo+KwkJCQlpZiAodG1wX3ZkZXYgJiYgKHRtcF92ZGV2LT50
dF9pbmZvID09IHR0X2luZm8pKQo+IAkJCQkJeGhjaV9mcmVlX3ZpcnRfZGV2aWNlc19kZXB0aF9m
aXJzdCgKPiAJCQkJCQl4aGNpLCBpKTsKPiAJCQl9CgoKSSBub3RpY2UgdGhpcyB0b28sICBqdXN0
IGEgZmV3IG1pbnV0ZXMgYWdvLCBJIGp1c3Qgc3RhcnRlZCBidWlsZGluZyBhIHBhdGNoIHdpdGgg
dGhpcyAqc2lsbHkqIGJ1ZyBmaXhlZC4gIAooVGhlIGRldmljZSBwb2ludGVyIGlzIHdyb25nLCB0
aGF0IGlzIG1vc3QgbGlrZWx5IHRoZSBjdWxwcml0OiB0aGUgdmlydHVhbCBkZXZpY2UgaXMgbm90
IHByb3Blcmx5IGZyZWVkIGFuZCBoZW5jZSBtZW1vcnkgbGVhay4pCldpbGwgdXBkYXRlIGxhdGVy
LgoKCkRhdmlkCj4K

