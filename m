Return-Path: <linux-usb-owner@vger.kernel.org>
X-Original-To: lists+linux-usb@lfdr.de
Delivered-To: lists+linux-usb@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [209.132.180.67])
	by mail.lfdr.de (Postfix) with ESMTP id 2E8431737AF
	for <lists+linux-usb@lfdr.de>; Fri, 28 Feb 2020 13:53:08 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726103AbgB1MxH (ORCPT <rfc822;lists+linux-usb@lfdr.de>);
        Fri, 28 Feb 2020 07:53:07 -0500
Received: from mail-pg1-f196.google.com ([209.85.215.196]:46474 "EHLO
        mail-pg1-f196.google.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1726400AbgB1MxH (ORCPT
        <rfc822;linux-usb@vger.kernel.org>); Fri, 28 Feb 2020 07:53:07 -0500
Received: by mail-pg1-f196.google.com with SMTP id y30so1464306pga.13
        for <linux-usb@vger.kernel.org>; Fri, 28 Feb 2020 04:53:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20161025;
        h=mime-version:references:in-reply-to:from:date:message-id:subject:to
         :cc;
        bh=xvtq6YgokW3dOsLf2LiPLCXiFYliWMU8X+XdnMUFWTY=;
        b=khxyAtO9q1wRQ+lcr4BsHyhmrJldouT8tHUupK/MZO/ZAUYk0/7vF97R72t0CoaEKy
         JueyKryrU/84wqmBTlYE9VnXL3BKt2Chqyy3/WT0mNdcGs/h9GDtjBeTa5ENhthLvN7J
         pcucStY7cyn4ZZ87wJKaPubABydibuewIdKqsn4nPl2MM3kSziMyUSFW6MF5igElPFC3
         3KY/DO9VB4NahsgYIihMqOfMNQib1RNbnBI0XFqw9+COeMG5YNnPCYjzh9Ml1gO1F9gk
         ga5N+/yuwrgzPuDFuXbTkLORhCbst8Ukk48hOQ+he2pWpMISOnySanzh8VR0ps8Z8jiX
         tRBA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20161025;
        h=x-gm-message-state:mime-version:references:in-reply-to:from:date
         :message-id:subject:to:cc;
        bh=xvtq6YgokW3dOsLf2LiPLCXiFYliWMU8X+XdnMUFWTY=;
        b=LAHZM0uWEWyy/Ka29ZT6V6GeRYXkZIHzym0LobLf1iH1q18uhWKVsueA2jQcB5JiHX
         mzKENWODFVbkficSfUl/guj+muqNVYymuW67imIq7pL6Alx6zvFOYRPXK5hr6rOwpw/g
         ADP8uxhFJVQNRZZsifSZxY9Z4AG+0z9XPmdbzwrXz1PqmCQ+52REyKRQgM+OydX9s0uz
         xx5xMJZyVkjk4kMXPHpeGXkNQtJJMk3ErqoPAhwmfhW5xElJ/KAPapNcZcnnEIQl7V2a
         thwCMVYxsp4/RSCNvD7UFVKolikXpyRj4RnAr2ALKcFmqijl/C9MkeO2jX6fFQWF/dqS
         SkyQ==
X-Gm-Message-State: APjAAAVc6vymM0Jz2Ks2xnhb7H13H1Tqan3rvT2KgOko8/FBZQ2LJSZp
        ZN5860tOwWsGg3okcV3Q0ktyEkRC6eRp9SL03IMyOw==
X-Google-Smtp-Source: APXvYqzpwNsgK3YVAW6YE68jIRhoDu3kMleJRygqKjLOc2b4xFIq5YJb+HtXnkwHHxD99JTpetytK9OtGZnpjMJoanU=
X-Received: by 2002:a63:f242:: with SMTP id d2mr4526336pgk.130.1582894385752;
 Fri, 28 Feb 2020 04:53:05 -0800 (PST)
MIME-Version: 1.0
References: <0000000000003bf3fb059fa247eb@google.com>
In-Reply-To: <0000000000003bf3fb059fa247eb@google.com>
From:   Andrey Konovalov <andreyknvl@google.com>
Date:   Fri, 28 Feb 2020 13:52:54 +0100
Message-ID: <CAAeHK+wXm115pU+rTpFQ_293bF6w9_5pgsEeZrFpeEQMPGBSCA@mail.gmail.com>
Subject: Re: BUG: bad host encryption descriptor; descriptor is too short (1
 vs 5 needed)
To:     syzbot <syzbot+2470d4931705e03b0977@syzkaller.appspotmail.com>
Cc:     LKML <linux-kernel@vger.kernel.org>,
        USB list <linux-usb@vger.kernel.org>,
        syzkaller-bugs <syzkaller-bugs@googlegroups.com>
Content-Type: text/plain; charset="UTF-8"
Sender: linux-usb-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-usb.vger.kernel.org>
X-Mailing-List: linux-usb@vger.kernel.org

On Fri, Feb 28, 2020 at 1:50 PM syzbot
<syzbot+2470d4931705e03b0977@syzkaller.appspotmail.com> wrote:
>
> Hello,
>
> syzbot found the following crash on:
>
> HEAD commit:    d6ff8147 usb: gadget: add raw-gadget interface
> git tree:       https://github.com/google/kasan.git usb-fuzzer
> console output: https://syzkaller.appspot.com/x/log.txt?x=15cd9a81e00000
> kernel config:  https://syzkaller.appspot.com/x/.config?x=90a3d9bed5648419
> dashboard link: https://syzkaller.appspot.com/bug?extid=2470d4931705e03b0977
> compiler:       gcc (GCC) 9.0.0 20181231 (experimental)
> syz repro:      https://syzkaller.appspot.com/x/repro.syz?x=15cfbd09e00000
> C reproducer:   https://syzkaller.appspot.com/x/repro.c?x=170e3645e00000
>
> IMPORTANT: if you fix the bug, please add the following tag to the commit:
> Reported-by: syzbot+2470d4931705e03b0977@syzkaller.appspotmail.com
>
> usb 1-1: config 0 interface 0 altsetting 0 has 2 endpoint descriptors, different from the interface descriptor's value: 4
> usb 1-1: New USB device found, idVendor=13dc, idProduct=5611, bcdDevice=40.15
> usb 1-1: New USB device strings: Mfr=0, Product=0, SerialNumber=0
> usb 1-1: config 0 descriptor??
> hwa-hc 1-1:0.0: Wire Adapter v106.52 newer than groked v1.0
> usb 1-1: BUG: bad host encryption descriptor; descriptor is too short (1 vs 5 needed)
> usb 1-1: supported encryption types:
> usb 1-1: E: host doesn't support CCM-1 crypto
> hwa-hc 1-1:0.0: Cannot initialize internals: -19
>
>
> ---
> This bug is generated by a bot. It may contain errors.
> See https://goo.gl/tpsmEJ for more information about syzbot.
> syzbot engineers can be reached at syzkaller@googlegroups.com.
>
> syzbot will keep track of this bug report. See:
> https://goo.gl/tpsmEJ#status for how to communicate with syzbot.
> syzbot can test patches for this bug, for details see:
> https://goo.gl/tpsmEJ#testing-patches

#syz dup: BUG: bad host security descriptor; not enough data (4 vs 5 left)
